description: >
  This command echos "Hello World" using file inclusion.
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  aws_access-key-id:
    default: AWS_ACCESS_KEY_ID
    description: |
      AWS access key id for IAM role. Set this to the name of the environment variable you will set to hold this value, i.e. AWS_ACCESS_KEY_ID.
    type: env_var_name

  aws_secret-access-key:
    default: AWS_SECRET_ACCESS_KEY
    description: |
      AWS secret key for IAM role. Set this to the name of the environment variable you will set to hold this value, i.e. AWS_SECRET_ACCESS_KEY.
    type: env_var_name

  region:
    default: AWS_REGION
    description: |
      Name of env var storing your AWS region information, defaults to AWS_REGION
    type: env_var_name


steps:
  - aws-cli/setup:
      aws-access-key-id: <<parameters.aws-access-key-id>>
      aws-region: <<parameters.region>>
      aws-secret-access-key: <<parameters.aws-secret-access-key>>

  - run:
      command: |
        # list all ECS clusters
        aws ecs list-clusters

  # TODO UPDATE CLUSTERS WITH RUNNING CONTAINERS & support for next token
